# 
# WireX
#
# Copyright (c) 2006-2019 Andreas Pott
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in all
# copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
# SOFTWARE.
# 
#-------------------------------------------------------------------------------
# Name:        Kontaktflaeche des Seils auf der Umlenkrolle; Daten bisher von
#              Hand erhoben.
# Purpose:
#
# Author:      asp
#
# Created:     01.09.2015
#-------------------------------------------------------------------------------
#!/usr/bin/env python

import numpy as np
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import matplotlib

# now add some speficic points to the surface
coords = [
    [2.2631	, -1.39466],
    [2.15569	, -1.39741],
    [2.39697	, -1.30056],
    [2.38171	, -1.32204],
    [2.09568	, -1.32204],
    [2.07529	, -1.38505],
    [2.55211	, -1.11527],
    [2.26749	, -1.29274],
    [2.01435	, -1.29274],
    [2.47721	, -1.16045],
    [2.19502	, -1.16045],
    [2.01706	, -1.33153],
    [2.62769	, -0.743006],
    [2.43454	, -1.17587],
    [1.93222	, -1.17587],
    [2.18097	, -1.23798],
    [1.95397	, -1.23798],
    [2.53652	, -0.899743],
    [2.26031	, -0.899743],
    [2.31599	, -1.12715],
    [1.89054	, -1.12715],
    [2.47131	, -0.967076],
    [1.99298	, -0.967076],
    [1.98196	, -1.22705],
    [2.49932	, -0.413508],
    [2.12013	, -1.17556],
    [1.92137	, -1.17556],
    [2.51585	, -0.645888],
    [2.25628	, -0.645888],
    [2.41551	, -0.994509],
    [1.83212	, -0.994509],
    [2.2319	, -1.09106],
    [1.8691	, -1.09106],
    [2.47413	, -0.771382],
    [2.03147	, -0.771382],
    [2.3168	, -0.987341],
    [1.8227	, -0.987341],
    [2.4255	, -0.83525],
    [1.87887	, -0.83525],
    [1.95869	, -1.12812],
    [2.35159	, -0.27452],
    [2.37492	, -0.865845],
    [1.78389	, -0.865845],
    [2.05603	, -1.07934],
    [1.89194	, -1.07934],
    [2.15623	, -1.02868],
    [1.84223	, -1.02868],
    [2.40487	, -0.388357],
    [2.17506	, -0.388357],
    [2.42745	, -0.545162],
    [2.01793	, -0.545162],
    [2.24129	, -0.940462],
    [1.79852	, -0.940462],
    [2.40047	, -0.659923],
    [1.87774	, -0.659923],
    [2.29273	, -0.846724],
    [1.76837	, -0.846724],
    [2.36234	, -0.718365],
    [1.79626	, -0.718365],
    [2.33869	, -0.782622],
    [1.75679	, -0.782622],
    [1.94007	, -1.05029],
    [2.02508	, -1.02234],
    [1.87731	, -1.02234],
    [2.24738	, -0.208328],
    [2.32716	, -0.290602],
    [2.11721	, -0.290602],
    [2.09705	, -0.978877],
    [1.82659	, -0.978877],
    [2.36044	, -0.380973],
    [1.99402	, -0.380973],
    [2.17711	, -0.912818],
    [1.7833	, -0.912818],
    [2.36683	, -0.507333],
    [1.87633	, -0.507333],
    [2.23567	, -0.835819],
    [1.75667	, -0.835819],
    [2.3459	, -0.602911],
    [1.80048	, -0.602911],
    [2.27367	, -0.783098],
    [1.74643	, -0.783098],
    [2.32905	, -0.667227],
    [1.76614	, -0.667227],
    [2.3084	, -0.723784],
    [1.73862	, -0.723784],
    [1.92373	, -0.98685],
    [1.99619	, -0.967382],
    [1.86401	, -0.967382],
    [2.06773	, -0.936864],
    [1.81111	, -0.936864],
    [2.17169	, -0.168052],
    [2.25182	, -0.218816],
    [2.06431	, -0.218816],
    [2.12347	, -0.896823],
    [1.77604	, -0.896823],
    [2.30752	, -0.298386],
    [1.95748	, -0.298386],
    [2.32808	, -0.381955],
    [1.87757	, -0.381955],
    [2.18788	, -0.82793],
    [1.74631	, -0.82793],
    [2.32545	, -0.498031],
    [1.80037	, -0.498031],
    [2.22179	, -0.780774],
    [1.73577	, -0.780774],
    [2.31403	, -0.563207],
    [1.76825	, -0.563207],
    [2.25354	, -0.727801],
    [1.72844	, -0.727801],
    [2.282	, -0.677803],
    [1.72473	, -0.677803],
    [2.29777	, -0.624202],
    [1.74262	, -0.624202],
    [1.90834	, -0.931398],
    [1.97584	, -0.918742],
    [1.84913	, -0.918742],
    [2.03906	, -0.89679],
    [1.79724	, -0.89679],
    [2.09522	, -0.862995],
    [1.75896	, -0.862995],
    [2.14109	, -0.820822],
    [1.73635	, -0.820822],
    [2.17744	, -0.776222],
    [1.72449	, -0.776222],
    [2.2073	, -0.731642],
    [1.7182	, -0.731642],
    [2.23334	, -0.686435],
    [1.71479	, -0.686435],
    [2.25754	, -0.638534],
    [1.71295	, -0.638534],
    [2.27197	, -0.58697],
    [1.72619	, -0.58697],
    [2.28448	, -0.530551],
    [1.74249	, -0.530551],
    [2.29411	, -0.465823],
    [1.76454	, -0.465823],
    [2.29767	, -0.39],
    [1.79717	, -0.39],
    [2.28745	, -0.305996],
    [1.84843	, -0.305996],
    [2.25353	, -0.228585],
    [1.92382	, -0.228585],
    [2.19347	, -0.172949],
    [2.01591	, -0.172949],
    [2.11175	, -0.138843],
    [2.205	, -0.65054],
    [1.71388	, -0.65054],
    [2.22922	, -0.603021],
    [1.70952	, -0.603021],
    [2.23997	, -0.551559],
    [1.72428	, -0.551559],
    [2.17473	, -0.696173],
    [1.72071	, -0.696173],
    [2.24618	, -0.489408],
    [1.74395	, -0.489408],
    [2.14287	, -0.737088],
    [1.73059	, -0.737088],
    [2.24731	, -0.425594],
    [1.76842	, -0.425594],
    [2.08191	, -0.79513],
    [1.75806	, -0.79513],
    [2.0296	, -0.828837],
    [1.79055	, -0.828837],
    [2.23081	, -0.316172],
    [1.82618	, -0.316172],
    [1.96383	, -0.857928],
    [1.84046	, -0.857928],
    [1.89609	, -0.873642],
    [2.19849	, -0.241833],
    [1.88669	, -0.241833],
    [2.13956	, -0.175446],
    [1.9728	, -0.175446],
    [2.06065	, -0.133082],
    [2.20041	, -0.569183],
    [1.70642	, -0.569183],
    [2.17191	, -0.617295],
    [1.71403	, -0.617295],
    [2.20546	, -0.51182],
    [1.72424	, -0.51182],
    [2.14174	, -0.66258],
    [1.72415	, -0.66258],
    [2.20713	, -0.452004],
    [1.74638	, -0.452004],
    [2.08731	, -0.714397],
    [1.74614	, -0.714397],
    [2.19051	, -0.356629],
    [1.78916	, -0.356629],
    [2.01933	, -0.766904],
    [1.78448	, -0.766904],
    [2.1526	, -0.253917],
    [1.85834	, -0.253917],
    [1.95543	, -0.794272],
    [1.82755	, -0.794272],
    [1.88328	, -0.817779],
    [2.09498	, -0.183899],
    [1.92897	, -0.183899],
    [2.01607	, -0.128578],
    [2.16883	, -0.534598],
    [1.70374	, -0.534598],
    [2.13826	, -0.586659],
    [1.71554	, -0.586659],
    [2.17026	, -0.474673],
    [1.72566	, -0.474673],
    [2.08476	, -0.626946],
    [1.73509	, -0.626946],
    [2.14698	, -0.389239],
    [1.759	, -0.389239],
    [2.01695	, -0.679835],
    [1.76955	, -0.679835],
    [1.94751	, -0.73466],
    [1.8157	, -0.73466],
    [2.10847	, -0.287129],
    [1.81634	, -0.287129],
    [2.05827	, -0.195305],
    [1.89355	, -0.195305],
    [2.13131	, -0.49699],
    [1.70222	, -0.49699],
    [1.86932	, -0.759574],
    [1.97431	, -0.126113],
    [2.07411	, -0.539583],
    [1.72421	, -0.539583],
    [2.10389	, -0.411856],
    [1.73489	, -0.411856],
    [2.01094	, -0.585399],
    [1.75586	, -0.585399],
    [2.06512	, -0.323573],
    [1.78161	, -0.323573],
    [2.08279	, -0.45489],
    [1.70529	, -0.45489],
    [1.93852	, -0.636252],
    [1.79756	, -0.636252],
    [2.01052	, -0.228246],
    [1.8452	, -0.228246],
    [1.85431	, -0.694377],
    [1.93378	, -0.13006],
    [2.01514	, -0.507001],
    [1.7415	, -0.507001],
    [2.0425	, -0.365568],
    [1.75334	, -0.365568],
    [1.9355	, -0.561963],
    [1.78829	, -0.561963],
    [1.98315	, -0.267572],
    [1.81864	, -0.267572],
    [2.01702	, -0.413716],
    [1.72641	, -0.413716],
    [1.84278	, -0.618505],
    [1.89891	, -0.158139],
    [1.93354	, -0.474739],
    [1.78436	, -0.474739],
    [1.9559	, -0.325244],
    [1.79834	, -0.325244],
    [1.84246	, -0.537938],
    [1.87831	, -0.224981],
    [1.9375	, -0.388895],
    [1.78105	, -0.388895],
    [1.84779	, -0.458918],
    [1.86531	, -0.302797],
    [1.85362	, -0.378249],

]

def main():  
    font = {'family' : 'normal', 'weight' : 'normal', 'size' : 10}
    matplotlib.rc('font', **font) 

    # Generate torus mesh
    angle = np.linspace(0, 2 * np.pi, 16)
    angle2 = np.linspace(0, np.pi, 16)
    theta, phi = np.meshgrid(angle, angle2)
    r, R = 0.05, 0.05
    X = (R + r * np.cos(phi)) * np.cos(theta)
    Y = (R + r * np.cos(phi)) * np.sin(theta)
    Z = r * np.sin(phi)
    # Display the mesh
    fig = plt.figure()
    ax = fig.gca(projection = '3d')
#    ax.plot_surface(X, Y, Z, color = 'w', rstride = 1, cstride = 1,alpha=0.5)
    ax.plot_wireframe(X, Y, Z, color = '0.75', rstride = 1, cstride = 1,alpha=1)

#    R+=0.05
    r+=0.005
    for phi,theta in coords:
        phi = 3.1415926 - phi
        X = (R + r * np.cos(phi)) * np.cos(theta)
        Y = (R + r * np.cos(phi)) * np.sin(theta)
        Z = r * np.sin(phi)
        ax.scatter(X,Y,Z,s=5,c='r',alpha=1.0)
#        plt.scatter(X,Y)
    ax.set_xlim3d(-0.1, 0.1)
    ax.set_ylim3d(-0.1, 0.1)
    ax.set_zlim3d(-0.05, 0.05)
    ax.set_xlabel('x')
    ax.set_ylabel('y')
    ax.set_zlabel('z')
    
    ax.view_init(elev=60., azim=-45)
    plt.savefig('PulleyKinematics_PulleyUsage_Torus.eps')
    plt.show()

    # create a scatter plot of the used range
    plt.close()
    
    # we have to 'transpose' the coordinate list, to pass it to the plotting command
    coordsT=map(list, zip(*coords))
    plt.scatter(coordsT[0],coordsT[1])

    # formatting    
    font = {'family' : 'normal', 'weight' : 'normal', 'size' : 18}
    matplotlib.rc('font', **font) 
    plt.grid(True)   
    plt.xlabel("$\\beta$")
    plt.ylabel('$\\gamma$')
#    plt.show()
    plt.savefig('PulleyKinematics_PulleyUsage_Flat.eps')
    
if __name__ == '__main__':
    main()
